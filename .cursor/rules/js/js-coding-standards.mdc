---
globs: js/**/*.js
description: FavoriteBoardé¡¹ç›®JavaScriptç¼–ç è§„èŒƒå’Œæ ‡å‡†
---

# FavoriteBoard JavaScript ç¼–ç è§„èŒƒ

## ğŸ—ï¸ æ¶æ„åŸåˆ™

### æ ¸å¿ƒè®¾è®¡åŸåˆ™
- **SOLIDåŸåˆ™**: å•ä¸€èŒè´£ã€å¼€æ”¾å°é—­ã€é‡Œæ°æ›¿æ¢ã€æ¥å£éš”ç¦»ã€ä¾èµ–å€’ç½®
- **DRYåŸåˆ™**: Don't Repeat Yourselfï¼Œé¿å…é‡å¤ä»£ç 
- **SRPåŸåˆ™**: Single Responsibility Principleï¼Œå•ä¸€èŒè´£
- **æ¨¡å—åŒ–è®¾è®¡**: é«˜å†…èšä½è€¦åˆï¼Œé¿å…å¾ªç¯ä¾èµ–

### æ¶æ„æ¨¡å¼
```javascript
// âœ… äº‹ä»¶é©±åŠ¨æ¶æ„
class MyComponent {
  constructor(eventBus) {
    this.eventBus = eventBus;
    this.setupEventListeners();
  }
  
  setupEventListeners() {
    this.eventBus.on('data-updated', this.handleDataUpdate.bind(this));
  }
}

// âœ… çŠ¶æ€ç®¡ç†æ¨¡å¼
this.stateManager.setState({ loading: true }, 'component-name');
```

## ğŸ“ æ–‡ä»¶ç»„ç»‡è§„èŒƒ

### ç›®å½•ç»“æ„
```
js/
â”œâ”€â”€ core/           # æ ¸å¿ƒç³»ç»Ÿï¼ˆäº‹ä»¶æ€»çº¿ã€çŠ¶æ€ç®¡ç†ï¼‰
â”œâ”€â”€ data/           # æ•°æ®å±‚ï¼ˆæ•°æ®ç®¡ç†ã€å¤„ç†ï¼‰
â”œâ”€â”€ ui/             # UIç®¡ç†å±‚ï¼ˆç»„ä»¶ç®¡ç†å™¨ï¼‰
â”œâ”€â”€ tabs/           # Tabå®ç°ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°ï¼ˆçº¯å‡½æ•°ï¼‰
â””â”€â”€ config/         # é…ç½®æ–‡ä»¶
```

### æ–‡ä»¶å‘½å
- ä½¿ç”¨kebab-caseå‘½å: `event-bus.js`, `state-manager.js`
- ç±»æ–‡ä»¶ä¸ç±»åå¯¹åº”: `BookmarkManager` â†’ `bookmark-manager.js`
- ç®¡ç†å™¨ç±»ç»Ÿä¸€åç¼€: `*-manager.js`

## ğŸ¯ ç±»å’Œæ–¹æ³•è®¾è®¡

### ç±»ç»“æ„è§„èŒƒ
```javascript
/**
 * ç±»æè¿° - èŒè´£è¯´æ˜
 * æ¶æ„è¯´æ˜å’Œè®¾è®¡æ¨¡å¼
 */
class ComponentName {
  constructor() {
    // 1. å±æ€§åˆå§‹åŒ–
    this.eventBus = null;
    this.stateManager = null;
    
    // 2. ç»„ä»¶ä¾èµ–
    this.subComponents = {};
    
    // 3. åˆå§‹åŒ–è°ƒç”¨
    this.init();
  }
  
  // ==================== ç”Ÿå‘½å‘¨æœŸæ–¹æ³• ====================
  
  init() {
    // åˆå§‹åŒ–é€»è¾‘
  }
  
  destroy() {
    // æ¸…ç†é€»è¾‘
  }
  
  // ==================== å…¬å…±APIæ–¹æ³• ====================
  
  publicMethod() {
    // å…¬å…±æ¥å£
  }
  
  // ==================== äº‹ä»¶å¤„ç†æ–¹æ³• ====================
  
  handleEvent() {
    // äº‹ä»¶å¤„ç†
  }
  
  // ==================== ç§æœ‰æ–¹æ³• ====================
  
  _privateMethod() {
    // ç§æœ‰æ–¹æ³•ç”¨ä¸‹åˆ’çº¿å‰ç¼€
  }
}
```

### æ–¹æ³•åˆ†ç»„è§„èŒƒ
ä½¿ç”¨æ³¨é‡Šåˆ†éš”ä¸åŒåŠŸèƒ½ç»„ï¼š
```javascript
// ==================== åˆå§‹åŒ–æ–¹æ³• ====================
// ==================== æ•°æ®ç®¡ç†æ–¹æ³• ====================  
// ==================== äº‹ä»¶å¤„ç†æ–¹æ³• ====================
// ==================== UIæ“ä½œæ–¹æ³• ====================
// ==================== å·¥å…·æ–¹æ³• ====================
```

## ğŸ“ æ³¨é‡Šå’Œæ–‡æ¡£è§„èŒƒ

### ç±»å’Œæ–¹æ³•æ³¨é‡Š
```javascript
/**
 * ç»„ä»¶ç®¡ç†å™¨ - è´Ÿè´£UIç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
 * å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç›‘å¬çŠ¶æ€å˜åŒ–å¹¶æ›´æ–°UI
 * @param {EventBus} eventBus - äº‹ä»¶æ€»çº¿å®ä¾‹
 * @param {StateManager} stateManager - çŠ¶æ€ç®¡ç†å™¨å®ä¾‹
 */
class UIManager {
  /**
   * åˆå§‹åŒ–UIç»„ä»¶
   * @param {Object} config - é…ç½®å¯¹è±¡
   * @param {string} config.theme - ä¸»é¢˜åç§°
   * @returns {Promise<void>}
   */
  async initComponents(config) {
    // å®ç°é€»è¾‘
  }
}
```

### æ—¥å¿—è§„èŒƒ
```javascript
// âœ… ä½¿ç”¨emojiå’Œç»Ÿä¸€æ ¼å¼
console.log('ğŸš€ ç»„ä»¶åˆå§‹åŒ–å¼€å§‹...');
console.log('âœ… ç»„ä»¶åˆå§‹åŒ–å®Œæˆ');
console.warn('âš ï¸ è­¦å‘Šä¿¡æ¯');
console.error('âŒ é”™è¯¯ä¿¡æ¯:', error);

// âœ… é‡è¦æ“ä½œæ·»åŠ è¯¦ç»†æ—¥å¿—
console.log('ğŸ“Š å¼€å§‹åŠ è½½æ•°æ®...', { source: 'api', params });
```

## ğŸ”„ äº‹ä»¶é©±åŠ¨æ¶æ„

### äº‹ä»¶å‘½åè§„èŒƒ
```javascript
// âœ… ä½¿ç”¨åŠ¨è¯-åè¯-çŠ¶æ€æ ¼å¼
'data-loaded'           // æ•°æ®åŠ è½½å®Œæˆ
'bookmark-updated'      // ä¹¦ç­¾æ›´æ–°
'tab-switched'          // æ ‡ç­¾åˆ‡æ¢
'folder-clicked'        // æ–‡ä»¶å¤¹ç‚¹å‡»
'search-query-changed'  // æœç´¢æŸ¥è¯¢å˜åŒ–
```

### äº‹ä»¶ç›‘å¬è§„èŒƒ
```javascript
// âœ… ä½¿ç”¨å”¯ä¸€ç›‘å¬å™¨é¿å…é‡å¤ç»‘å®š
this.eventBus.on('event-name', this.handleEvent.bind(this), { unique: true });

// âœ… ç”Ÿå‘½å‘¨æœŸå†…æ­£ç¡®æ¸…ç†
destroy() {
  this.eventBus.off('event-name', this.handleEvent);
}
```

## ğŸ“Š çŠ¶æ€ç®¡ç†è§„èŒƒ

### çŠ¶æ€æ›´æ–°
```javascript
// âœ… æŒ‡å®šæ“ä½œæºï¼Œä¾¿äºè°ƒè¯•
this.stateManager.setState({ loading: true }, 'component-init');
this.stateManager.setUIState({ sidebarOpen: false }, 'user-action');

// âœ… æ‰¹é‡æ›´æ–°
this.stateManager.batchUpdate(() => {
  this.stateManager.setState({ data: newData });
  this.stateManager.setUIState({ loading: false });
}, 'data-refresh');
```

### çŠ¶æ€è®¢é˜…
```javascript
// âœ… è®¢é˜…ç‰¹å®šçŠ¶æ€å˜åŒ–
this.stateManager.subscribe(['data.folderTree'], ([folderTree]) => {
  this.updateUI(folderTree);
});
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†è§„èŒƒ

### å¼‚æ­¥æ“ä½œé”™è¯¯å¤„ç†
```javascript
async loadData() {
  try {
    console.log('ğŸ“Š å¼€å§‹åŠ è½½æ•°æ®...');
    
    const data = await this.dataSource.fetch();
    
    console.log('âœ… æ•°æ®åŠ è½½å®Œæˆ');
    return data;
    
  } catch (error) {
    console.error('âŒ æ•°æ®åŠ è½½å¤±è´¥:', error);
    
    // ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
    this.showNotification('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
    
    // é‡æ–°æŠ›å‡ºä¾›ä¸Šå±‚å¤„ç†
    throw error;
  }
}
```

### é˜²å¾¡å¼ç¼–ç¨‹
```javascript
// âœ… å‚æ•°éªŒè¯
validateParams(config) {
  if (!config || typeof config !== 'object') {
    throw new Error('é…ç½®å¯¹è±¡ä¸èƒ½ä¸ºç©º');
  }
}

// âœ… å®‰å…¨çš„DOMæ“ä½œ
const element = document.getElementById('myElement');
if (!element) {
  console.warn('âš ï¸ å…ƒç´ ä¸å­˜åœ¨ï¼Œè·³è¿‡æ“ä½œ');
  return;
}
```

## ğŸ”§ å·¥å…·å‡½æ•°è§„èŒƒ

### çº¯å‡½æ•°åŸåˆ™
```javascript
// âœ… utils/ ä¸‹çš„å‡½æ•°åº”è¯¥æ˜¯çº¯å‡½æ•°
export function processData(input) {
  // ä¸ä¿®æ”¹è¾“å…¥å‚æ•°
  const result = { ...input };
  
  // å¤„ç†é€»è¾‘
  result.processed = true;
  
  return result;
}

// âŒ é¿å…å‰¯ä½œç”¨
function badFunction(data) {
  data.modified = true; // ä¿®æ”¹äº†è¾“å…¥å‚æ•°
  console.log('Processing...'); // äº§ç”Ÿå‰¯ä½œç”¨
}
```

## ğŸ¨ ä»£ç é£æ ¼

### ES6+ è¯­æ³•
```javascript
// âœ… ä½¿ç”¨const/letï¼Œé¿å…var
const config = { theme: 'dark' };
let currentState = null;

// âœ… ä½¿ç”¨è§£æ„èµ‹å€¼
const { eventBus, stateManager } = this.dependencies;

// âœ… ä½¿ç”¨ç®­å¤´å‡½æ•°
const items = data.map(item => item.id);

// âœ… ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²
console.log(`å¤„ç†é¡¹ç›®: ${item.title}`);
```

### å¼‚æ­¥å¤„ç†
```javascript
// âœ… ä½¿ç”¨async/await
async handleAsyncOperation() {
  try {
    const result = await this.asyncMethod();
    return result;
  } catch (error) {
    this.handleError(error);
  }
}

// âŒ é¿å…å›è°ƒåœ°ç‹±
// callback(function(result) { ... });
```

## ğŸ”— ä¾èµ–ç®¡ç†

### æ¨¡å—å¯¼å…¥å¯¼å‡º
```javascript
// âœ… æ˜ç¡®çš„å¯¼å…¥
import { SpecificClass } from './specific-module.js';

// âœ… é»˜è®¤å¯¼å‡ºä¸»ç±»
export default class MainComponent { }

// âœ… å‘½åå¯¼å‡ºå·¥å…·å‡½æ•°
export { helperFunction, utilityMethod };
```

### é¿å…å¾ªç¯ä¾èµ–
- core/ æ¨¡å—ä¸åº”ä¾èµ–å…¶ä»–æ¨¡å—
- ui/ æ¨¡å—å¯ä¾èµ– core/ å’Œ utils/
- tabs/ æ¨¡å—å¯ä¾èµ– core/, ui/, utils/
- utils/ æ¨¡å—åº”è¯¥æ˜¯ç‹¬ç«‹çš„çº¯å‡½æ•°

## ğŸ§ª ä»£ç è´¨é‡æ£€æŸ¥

### å¿…éœ€æ£€æŸ¥é¡¹
- [ ] æ˜¯å¦éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„é”™è¯¯å¤„ç†
- [ ] æ˜¯å¦æœ‰æ¸…æ™°çš„æ³¨é‡Šè¯´æ˜
- [ ] æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº‹ä»¶æ€»çº¿
- [ ] æ˜¯å¦æœ‰å†…å­˜æ³„æ¼é£é™©
- [ ] æ˜¯å¦é¿å…äº†å¾ªç¯ä¾èµ–

### æ€§èƒ½è€ƒè™‘
```javascript
// âœ… ç¼“å­˜DOMæŸ¥è¯¢
constructor() {
  this.elements = {
    container: document.getElementById('container'),
    button: document.querySelector('.action-btn')
  };
}

// âœ… æ‰¹é‡DOMæ“ä½œ
updateMultipleElements(data) {
  const fragment = document.createDocumentFragment();
  data.forEach(item => {
    const element = this.createElement(item);
    fragment.appendChild(element);
  });
  this.container.appendChild(fragment);
}
```

---

> ğŸ± **å°è´´å£«**: è¿™äº›è§„èŒƒæ—¨åœ¨ç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå›¢é˜Ÿåä½œæ•ˆç‡å–µï½
